----------------------------------------------------------------------------
                                - afxmake -
                              afxmake.exe v0.2.1
----------------------------------------------------------------------------
                                                         2011.07.12 yuratomo
■概要
本アプリケーションは、あふwからめいく(びるど)を行うためのツールです。
java,ant,vc8,vc9,wdk7に対応したつもりです。。。
また、adobe flex用のメニューも用意したので使えるかもしれない？


■動作条件
・afxw 1.29b以上 (オートメーションサーバーが有効であること)
・javaやantを使う場合は、それぞれパスや必要な環境変数が設定されていること。
・ckw & afxckw (any version) ※インストールしたくない場合はafxmake.mnuを修正
　して使ってください。($~\afxckw.exe -e を消せばおｋ?)


■依存関係
・JDK6 (javaのびるどに必要。6より以前は試していないので不明)
・Apache ant 1.8(antを使ったびるどに必要。1.8より以前は試していないので不明)
・Visual Studio 2005 (vs2005用のプロジェクトファイルのびるどに必要)
・Visual Studio 2008 (vs2008用のプロジェクトファイルのびるどに必要)
・WDK7.1 (デバイスドライバのびるどに必要)


■あるとよいもの
・afxfazzy


■インストール方法
・VC12のランタイムをインストールする

・afxmake.*を適当なフォルダに格納する。（あふwと同一のフォルダ推奨）

・afxw.keyに以下のような設定を行う。afxw.keyについてはafxwkey.txtを参照のこと

  K00??="3077&MENU "$~\afxtools\bin\afxmake.mnu""
  K00??="1077&MENU .afxmake"

  ※CTRL-SHIFT-Mキーでビルドメニュー表示
  ※SHIFT-Mキーでビルド結果メニュー表示
  ※afxfazzyがあるなら3077はafxfazzyにセットした方がよいかも。(afxfazzyb.mnuの差し替え)

・afxmake.iniにエディタの設定を行う。

  [Config]
  format = &EDIT +%d "%s"

  ※&EDITはあふで設定しているエディタ。%dは行番号。%sはファイル名。
  ※これはvimの設定例
  ※エラーのあるファイル・行番号をメニューから開くときに使用します。

・afxmake_common.batを自分の環境に合わせて環境変数を修正する
  AFXMAKE   afxmake.exeのフルパスを指定する
  VC8VAR    vc8のvcvar32.batのフルパスを指定する
  VC9VAR    vc9のvcvar32.batのフルパスを指定する
  WDK7DIR   WDKのインストールパスを指定する


■準備
・あふwのオートメーションサーバーを有効にする


■使い方

java)
1. パッケージルート指定
あふwでパッケージルートに移動して(例参照)
メニューから「java set package root dir」を実行する。

  例. c:\hoge\net\seesaa\yuratomo\test.javaでパッケージが
  net.yuratomo.seesaaだったら、c:\hoge\に移動する。

2. ビルドする
ターゲットソース上にカーソルを合わせて、メニューから
「java javac ...」を実行する。


ant)
・あふwでbuild.xmlが存在するディレクトリに移動する(カーソルはあわせなくてよいです)
・メニューから「apache ant ...」を実行する。


vc8)
・あふwでvc8の*.vcprojが存在するディレクトリに移動する(カーソルはあわせなくてよいです)
・メニューから「vcbuild ... vc8」を実行する。


vc9)
・あふwでvc9の*.vcprojが存在するディレクトリに移動する(カーソルはあわせなくてよいです)
・メニューから「vcbuild ... vc9」を実行する。


wdk)
・あふwでWDKのMAKEFILE,sourceが存在するディレクトリに移動する(カーソルはあわせなくてよいです)
・メニューから「WDK ...」を実行する。


flex)
大体次の3つで十分？ほかにも色々入れてみたけど使えるかは不明・・・
・メニューから「flex fcsh」
・メニューから「flex mxmlc」
・メニューから「flex compil 1」


■コマンド書式
afxmakeのコマンドの書式は、以下のとおりです。

(書式)
    afxmake.exe [java|ant|vc] ビルド結果ファイル
         java ... java用
         ant  ... ant用
         vc   ... vc8,vc9,wdk用


■注意・制限事項

・あふwが複数起動している場合の正常に動作しない可能性があります。
・javaのパッケージルート指定はあふwの内部変数$8を使用します。


■著作権・免責等
本アプリケーションの著作権は、yuratomoが所有します。
本アプリケーションによって発生した直接的、間接的に生じたいかなる利益の損失や
損害に対してもyuratomoは一切の責任を負いません。
あらゆる損害の免責をご承諾いただくことを使用条件とします。


■謝辞
あふwというすばらしいアプリケーションを提供されているＡＫＴ氏に感謝します。


■最新版の入手方法について
アプリケーションの最新版は、以下のブログから入手してください。

  http://yuratomo.seesaa.net/


■変更履歴
2011.04.17 0.1.0 新規公開
2011.07.02 0.2.0 消えてしまったソースコードを復元。
                 キーによるメニュー表示からオートメーションサーバーでExecに
                 変更した。
                 javaでパッケージが指定されていてもビルドできるようにした。
                 ant対応
2011.07.12 0.2.1 errorとwarningの判定ミス修正
                                                                         END
----------------------------------------------------------------------------
